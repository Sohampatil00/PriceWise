rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {

    // Public read access for all data needed by the UI.
    // Writes are disabled as there is no authentication model.

    match /products/{productId} {
      allow get, list: if true;
      allow create, update, delete: if false;
    }

    match /products/{productId}/competitorPrices/{competitorPriceId} {
      allow get, list: if true;
      allow create, update, delete: if false;
    }

    match /products/{productId}/priceHistory/{priceHistoryId} {
      allow get, list: if true;
      allow create, update, delete: if false;
    }

    match /products/{productId}/pricingRules/{pricingRuleId} {
      allow get, list: if true;
      allow create, update, delete: if false;
    }

    match /products/{productId}/demandForecasts/{demandForecastId} {
      allow get, list: if true;
      allow create, update, delete: if false;
    }

    match /experiments/{experimentId} {
       allow get, list: if true;
       allow create, update, delete: if false;
    }

    match /emergencyEvents/{eventId} {
       allow get, list: if true;
       allow create, update, delete: if false;
    }

    // Auth-related collections are no longer used and are locked down.
    match /userbase/{userId} {
      allow read, write: if false;
    }

    match /adminbase/{adminId} {
      allow read, write: if false;
    }
  }
}
