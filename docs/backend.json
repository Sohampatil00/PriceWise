{
  "entities": {
    "Product": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Product",
      "type": "object",
      "description": "Represents a product in the e-commerce system.",
      "properties": {
        "id": { "type": "string", "description": "Unique identifier for the product." },
        "name": { "type": "string", "description": "Name of the product." },
        "category": { "type": "string", "description": "Category of the product." },
        "cost": { "type": "number", "description": "Cost of the product in Rupees." },
        "currentPrice": { "type": "number", "description": "Current selling price of the product in Rupees." },
        "minPrice": { "type": "number", "description": "Minimum allowable price for the product in Rupees." },
        "maxPrice": { "type": "number", "description": "Maximum allowable price for the product in Rupees." },
        "targetMargin": { "type": "number", "description": "Target profit margin for the product (percentage)." },
        "inventory": { "type": "number", "description": "Current inventory level of the product." },
        "salesLast30d": { "type": "number", "description": "Number of sales in the last 30 days." },
        "imageUrl": { "type": "string", "description": "URL of the product image." },
        "imageHint": { "type": "string", "description": "Hint for AI image generation." },
        "description": { "type": "string", "description": "A detailed description of the product." },
        "isEssential": { "type": "boolean", "description": "Indicates if the product is an essential good." }
      },
      "required": ["id", "name", "cost", "currentPrice", "minPrice", "maxPrice", "targetMargin", "inventory", "salesLast30d", "imageUrl", "description"]
    },
    "CompetitorPrice": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "CompetitorPrice",
      "type": "object",
      "description": "Represents a competitor's pricing information for a product.",
      "properties": {
        "id": { "type": "string", "description": "Unique identifier for the competitor price." },
        "productId": { "type": "string", "description": "Reference to Product." },
        "competitor": { "type": "string", "description": "Name of the competitor." },
        "price": { "type": "number", "description": "Competitor's price for the product in Rupees." },
        "lastUpdated": { "type": "string", "description": "Timestamp of the last price update.", "format": "date-time" }
      },
      "required": ["id", "productId", "competitor", "price", "lastUpdated"]
    },
    "PriceHistory": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "PriceHistory",
      "type": "object",
      "description": "Represents the historical price changes of a product.",
      "properties": {
        "id": { "type": "string", "description": "Unique identifier for the price history entry." },
        "productId": { "type": "string", "description": "Reference to Product." },
        "price": { "type": "number", "description": "Price of the product in Rupees at the time of the change." },
        "timestamp": { "type": "string", "description": "Timestamp of when the price change occurred.", "format": "date-time" }
      },
      "required": ["id", "productId", "price", "timestamp"]
    },
    "PricingRule": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "PricingRule",
      "type": "object",
      "description": "Represents a pricing rule or constraint applied to a product.",
      "properties": {
        "id": { "type": "string", "description": "Unique identifier for the pricing rule." },
        "productId": { "type": "string", "description": "Reference to Product." },
        "ruleName": { "type": "string", "description": "Name of the pricing rule (e.g., 'never_below_cost')." },
        "ruleExpression": { "type": "string", "description": "Expression defining the pricing rule (e.g., 'price >= cost * 1.2')." }
      },
      "required": ["id", "productId", "ruleName", "ruleExpression"]
    },
    "DemandForecast": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "DemandForecast",
      "type": "object",
      "description": "Represents a demand forecast for a product.",
      "properties": {
        "id": { "type": "string", "description": "Unique identifier for the demand forecast." },
        "productId": { "type": "string", "description": "Reference to Product." },
        "forecastedDemand": { "type": "number", "description": "The predicted demand of the product." },
        "timestamp": { "type": "string", "description": "The timestamp the demand was forcasted.", "format": "date-time" }
      },
      "required": ["id", "productId", "forecastedDemand", "timestamp"]
    },
    "Experiment": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "title": "Experiment",
        "type": "object",
        "description": "Represents a pricing experiment.",
        "properties": {
            "id": { "type": "string", "description": "Unique identifier for the experiment." },
            "name": { "type": "string", "description": "Name of the experiment." },
            "productId": { "type": "string", "description": "Reference to Product." },
            "status": { "type": "string", "enum": ["active", "completed", "draft"] },
            "startDate": { "type": "string", "format": "date" },
            "endDate": { "type": "string", "format": "date" },
            "controlPrice": { "type": "number" },
            "experimentPrice": { "type": "number" },
            "controlRevenue": { "type": "number" },
            "experimentRevenue": { "type": "number" },
            "controlUnitsSold": { "type": "number" },
            "experimentUnitsSold": { "type": "number" }
        },
        "required": ["id", "name", "productId", "status", "startDate", "endDate", "controlPrice", "experimentPrice", "controlRevenue", "experimentRevenue", "controlUnitsSold", "experimentUnitsSold"]
    },
    "UserBase": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "UserBase",
      "type": "object",
      "description": "Represents a user of the application.",
      "properties": {
        "id": { "type": "string", "description": "Unique identifier for the user." },
        "username": { "type": "string", "description": "Username for the user." },
        "email": { "type": "string", "description": "Email address of the user.", "format": "email" },
        "role": { "type": "string", "description": "Role of the user (e.g., 'admin', 'user')." }
      },
      "required": ["id", "username", "email", "role"]
    },
    "AdminBase": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "AdminBase",
      "type": "object",
      "description": "Represents an administrator of the application.",
      "properties": {
        "id": { "type": "string", "description": "Unique identifier for the administrator." },
        "username": { "type": "string", "description": "Username for the administrator." },
        "email": { "type": "string", "description": "Email address of the administrator.", "format": "email" },
        "role": { "type": "string", "description": "Role of the administrator (e.g., 'superadmin', 'admin')." }
      },
      "required": ["id", "username", "email", "role"]
    },
    "EmergencyEvent": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "EmergencyEvent",
      "type": "object",
      "description": "Represents a crisis event that triggers special pricing rules.",
      "properties": {
        "id": { "type": "string", "description": "Unique identifier for the event." },
        "name": { "type": "string", "description": "Name of the crisis event (e.g., 'COVID-19 Pandemic')." },
        "isActive": { "type": "boolean", "description": "Whether the emergency mode is currently active." },
        "startDate": { "type": "string", "format": "date-time" },
        "endDate": { "type": "string", "format": "date-time", "description": "Optional end date for the event." }
      },
      "required": ["id", "name", "isActive", "startDate"]
    }
  },
  "auth": {
    "providers": ["password", "anonymous"]
  },
  "firestore": {
    "structure": [
      {
        "path": "/products/{productId}",
        "definition": { "entityName": "Product", "schema": { "$ref": "#/entities/Product" }, "description": "Stores product information." }
      },
      {
        "path": "/products/{productId}/competitorPrices/{competitorPriceId}",
        "definition": { "entityName": "CompetitorPrice", "schema": { "$ref": "#/entities/CompetitorPrice" }, "description": "Stores competitor pricing information." }
      },
      {
        "path": "/products/{productId}/priceHistory/{priceHistoryId}",
        "definition": { "entityName": "PriceHistory", "schema": { "$ref": "#/entities/PriceHistory" }, "description": "Stores price history." }
      },
      {
        "path": "/products/{productId}/pricingRules/{pricingRuleId}",
        "definition": { "entityName": "PricingRule", "schema": { "$ref": "#/entities/PricingRule" }, "description": "Stores pricing rules." }
      },
      {
        "path": "/products/{productId}/demandForecasts/{demandForecastId}",
        "definition": { "entityName": "DemandForecast", "schema": { "$ref": "#/entities/DemandForecast" }, "description": "Stores demand forecasts." }
      },
      {
        "path": "/experiments/{experimentId}",
        "definition": { "entityName": "Experiment", "schema": { "$ref": "#/entities/Experiment" }, "description": "Stores pricing experiments." }
      },
      {
        "path": "/userbase/{userId}",
        "definition": { "entityName": "UserBase", "schema": { "$ref": "#/entities/UserBase" }, "description": "Stores user profile information." }
      },
      {
        "path": "/adminbase/{adminId}",
        "definition": { "entityName": "AdminBase", "schema": { "$ref": "#/entities/AdminBase" }, "description": "Stores admin profile information." }
      },
      {
        "path": "/emergencyEvents/{eventId}",
        "definition": { "entityName": "EmergencyEvent", "schema": { "$ref": "#/entities/EmergencyEvent" }, "description": "Stores crisis event information." }
      }
    ]
  }
}
